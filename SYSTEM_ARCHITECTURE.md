# ğŸ—ï¸ System Architecture - Faith Brilliant Stars School

## ğŸ“Š High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND LAYER                          â”‚
â”‚                      (SvelteKit + Tailwind)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Head Teacher â”‚  â”‚  Accountant  â”‚  â”‚   Teacher    â”‚         â”‚
â”‚  â”‚  Dashboard   â”‚  â”‚  Dashboard   â”‚  â”‚  Dashboard   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚    Parent    â”‚  â”‚   Students   â”‚  â”‚   Classes    â”‚         â”‚
â”‚  â”‚  Dashboard   â”‚  â”‚     View     â”‚  â”‚     View     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP/REST API
                              â”‚ JWT Authentication
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          API LAYER                              â”‚
â”‚                      (FastAPI + Python)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Authentication                         â”‚  â”‚
â”‚  â”‚              JWT Tokens + Role-Based Access              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Head Teacher â”‚  â”‚  Accountant  â”‚  â”‚   Teacher    â”‚         â”‚
â”‚  â”‚     API      â”‚  â”‚     API      â”‚  â”‚     API      â”‚         â”‚
â”‚  â”‚ 15 endpoints â”‚  â”‚ 15 endpoints â”‚  â”‚ 12 endpoints â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚    Parent    â”‚  â”‚   Students   â”‚  â”‚  Attendance  â”‚         â”‚
â”‚  â”‚     API      â”‚  â”‚     API      â”‚  â”‚     API      â”‚         â”‚
â”‚  â”‚ 12 endpoints â”‚  â”‚  5 endpoints â”‚  â”‚  8 endpoints â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ SQLAlchemy ORM
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATABASE LAYER                           â”‚
â”‚                          (SQLite)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚    Users     â”‚  â”‚   Students   â”‚  â”‚   Teachers   â”‚         â”‚
â”‚  â”‚   Guardians  â”‚  â”‚   Classes    â”‚  â”‚   Subjects   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Attendance  â”‚  â”‚   Invoices   â”‚  â”‚   Payments   â”‚         â”‚
â”‚  â”‚ Assessments  â”‚  â”‚   Messages   â”‚  â”‚   Meetings   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Academic   â”‚  â”‚    School    â”‚  â”‚    Audit     â”‚         â”‚
â”‚  â”‚   Calendar   â”‚  â”‚   Settings   â”‚  â”‚     Logs     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

### 1. Authentication Flow
```
User Login
    â”‚
    â”œâ”€â–º Frontend: POST /api/auth/login
    â”‚       â”‚
    â”‚       â”œâ”€â–º Backend: Validate credentials
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â–º Database: Check user
    â”‚       â”‚       â”‚
    â”‚       â”‚       â””â”€â–º Generate JWT token
    â”‚       â”‚
    â”‚       â””â”€â–º Return token to frontend
    â”‚
    â””â”€â–º Store token in localStorage
```

### 2. Head Teacher - Student Management Flow
```
Head Teacher
    â”‚
    â”œâ”€â–º Dashboard: View stats
    â”‚       â”‚
    â”‚       â””â”€â–º GET /api/head-teacher/dashboard
    â”‚               â”‚
    â”‚               â””â”€â–º Aggregate data from multiple tables
    â”‚
    â”œâ”€â–º Add Student
    â”‚       â”‚
    â”‚       â””â”€â–º POST /api/head-teacher/students
    â”‚               â”‚
    â”‚               â”œâ”€â–º Validate data
    â”‚               â”œâ”€â–º Create student record
    â”‚               â”œâ”€â–º Log audit trail
    â”‚               â””â”€â–º Return success
    â”‚
    â””â”€â–º View Reports
            â”‚
            â””â”€â–º GET /api/head-teacher/reports/attendance
                    â”‚
                    â””â”€â–º Query attendance data
                            â”‚
                            â””â”€â–º Calculate statistics
```

### 3. Accountant - Payment Processing Flow
```
Accountant
    â”‚
    â”œâ”€â–º Create Bulk Invoices
    â”‚       â”‚
    â”‚       â””â”€â–º POST /api/accountant/invoices/bulk
    â”‚               â”‚
    â”‚               â”œâ”€â–º Get all students in class
    â”‚               â”œâ”€â–º Generate invoice for each
    â”‚               â”œâ”€â–º Auto-number invoices
    â”‚               â””â”€â–º Return count
    â”‚
    â”œâ”€â–º Record Payment
    â”‚       â”‚
    â”‚       â””â”€â–º POST /api/accountant/payments
    â”‚               â”‚
    â”‚               â”œâ”€â–º Find invoice
    â”‚               â”œâ”€â–º Create payment record
    â”‚               â”œâ”€â–º Generate receipt number
    â”‚               â”œâ”€â–º Update invoice status
    â”‚               â”œâ”€â–º Log audit trail
    â”‚               â””â”€â–º Return receipt
    â”‚
    â””â”€â–º View Reports
            â”‚
            â””â”€â–º GET /api/accountant/reports/revenue
                    â”‚
                    â””â”€â–º Aggregate payment data
                            â”‚
                            â””â”€â–º Group by category/method
```

### 4. Teacher - Attendance Flow
```
Teacher
    â”‚
    â”œâ”€â–º View Dashboard
    â”‚       â”‚
    â”‚       â””â”€â–º GET /api/teacher/dashboard
    â”‚               â”‚
    â”‚               â””â”€â–º Get assigned classes
    â”‚                       â”‚
    â”‚                       â””â”€â–º Calculate statistics
    â”‚
    â”œâ”€â–º Mark Attendance (Bulk)
    â”‚       â”‚
    â”‚       â””â”€â–º POST /api/teacher/attendance/bulk
    â”‚               â”‚
    â”‚               â”œâ”€â–º Validate date
    â”‚               â”œâ”€â–º Check for duplicates
    â”‚               â”œâ”€â–º Create/update records
    â”‚               â””â”€â–º Return success
    â”‚
    â””â”€â–º Offline Sync
            â”‚
            â””â”€â–º POST /api/teacher/attendance/sync
                    â”‚
                    â”œâ”€â–º Receive offline data
                    â”œâ”€â–º Validate records
                    â”œâ”€â–º Merge with database
                    â””â”€â–º Return sync status
```

### 5. Parent - Child Monitoring Flow
```
Parent
    â”‚
    â”œâ”€â–º View Dashboard
    â”‚       â”‚
    â”‚       â””â”€â–º GET /api/parent/dashboard
    â”‚               â”‚
    â”‚               â”œâ”€â–º Get all children
    â”‚               â”œâ”€â–º Get attendance for each
    â”‚               â”œâ”€â–º Get outstanding fees
    â”‚               â”œâ”€â–º Get unread messages
    â”‚               â””â”€â–º Return summary
    â”‚
    â”œâ”€â–º Check Attendance
    â”‚       â”‚
    â”‚       â””â”€â–º GET /api/parent/children/{id}/attendance
    â”‚               â”‚
    â”‚               â”œâ”€â–º Verify parent-child relationship
    â”‚               â”œâ”€â–º Query attendance records
    â”‚               â”œâ”€â–º Calculate statistics
    â”‚               â””â”€â–º Return data
    â”‚
    â””â”€â–º Send Message
            â”‚
            â””â”€â–º POST /api/parent/messages
                    â”‚
                    â”œâ”€â–º Create message record
                    â”œâ”€â–º Notify recipient
                    â””â”€â–º Return success
```

---

## ğŸ—„ï¸ Database Schema

### Core Tables
```
users
â”œâ”€â”€ id (PK)
â”œâ”€â”€ email (UNIQUE)
â”œâ”€â”€ hashed_password
â”œâ”€â”€ full_name
â”œâ”€â”€ role (ENUM: head_teacher, accountant, teacher, parent)
â””â”€â”€ is_active

students
â”œâ”€â”€ id (PK)
â”œâ”€â”€ user_id (FK â†’ users.id)
â”œâ”€â”€ admission_number (UNIQUE)
â”œâ”€â”€ first_name
â”œâ”€â”€ last_name
â”œâ”€â”€ class_id (FK â†’ classes.id)
â””â”€â”€ enrollment_status

teachers
â”œâ”€â”€ id (PK)
â”œâ”€â”€ user_id (FK â†’ users.id)
â”œâ”€â”€ employee_number (UNIQUE)
â”œâ”€â”€ first_name
â”œâ”€â”€ last_name
â””â”€â”€ qualification

guardians
â”œâ”€â”€ id (PK)
â”œâ”€â”€ user_id (FK â†’ users.id)
â”œâ”€â”€ first_name
â”œâ”€â”€ last_name
â””â”€â”€ phone

classes
â”œâ”€â”€ id (PK)
â”œâ”€â”€ name
â”œâ”€â”€ grade_level
â”œâ”€â”€ class_teacher_id (FK â†’ teachers.id)
â””â”€â”€ capacity
```

### Financial Tables
```
invoices
â”œâ”€â”€ id (PK)
â”œâ”€â”€ invoice_number (UNIQUE)
â”œâ”€â”€ student_id (FK â†’ students.id)
â”œâ”€â”€ category
â”œâ”€â”€ amount
â”œâ”€â”€ amount_paid
â”œâ”€â”€ status
â””â”€â”€ due_date

payments
â”œâ”€â”€ id (PK)
â”œâ”€â”€ receipt_number (UNIQUE)
â”œâ”€â”€ invoice_id (FK â†’ invoices.id)
â”œâ”€â”€ amount
â”œâ”€â”€ payment_method
â””â”€â”€ payment_date

fee_structures
â”œâ”€â”€ id (PK)
â”œâ”€â”€ class_id (FK â†’ classes.id)
â”œâ”€â”€ category
â”œâ”€â”€ amount
â””â”€â”€ is_recurring
```

### Academic Tables
```
attendance
â”œâ”€â”€ id (PK)
â”œâ”€â”€ student_id (FK â†’ students.id)
â”œâ”€â”€ class_id (FK â†’ classes.id)
â”œâ”€â”€ date
â”œâ”€â”€ status
â””â”€â”€ marked_by (FK â†’ users.id)

assessments
â”œâ”€â”€ id (PK)
â”œâ”€â”€ student_id (FK â†’ students.id)
â”œâ”€â”€ subject
â”œâ”€â”€ score
â”œâ”€â”€ max_score
â””â”€â”€ assessment_date

academic_terms
â”œâ”€â”€ id (PK)
â”œâ”€â”€ name
â”œâ”€â”€ academic_year
â”œâ”€â”€ start_date
â”œâ”€â”€ end_date
â””â”€â”€ is_active
```

### System Tables
```
audit_logs
â”œâ”€â”€ id (PK)
â”œâ”€â”€ user_id (FK â†’ users.id)
â”œâ”€â”€ action
â”œâ”€â”€ entity_type
â”œâ”€â”€ entity_id
â””â”€â”€ created_at

notifications
â”œâ”€â”€ id (PK)
â”œâ”€â”€ user_id (FK â†’ users.id)
â”œâ”€â”€ title
â”œâ”€â”€ message
â”œâ”€â”€ is_read
â””â”€â”€ created_at

messages
â”œâ”€â”€ id (PK)
â”œâ”€â”€ sender_id (FK â†’ users.id)
â”œâ”€â”€ recipient_id (FK â†’ users.id)
â”œâ”€â”€ subject
â”œâ”€â”€ message
â””â”€â”€ is_read
```

---

## ğŸ” Security Architecture

### Authentication Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User Login Request          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Validate Credentials           â”‚
â”‚   (Email + Password with bcrypt)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Generate JWT Token            â”‚
â”‚   (Includes: user_id, role, exp)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Return Token to Client         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Authorization Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      API Request with Token         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Verify JWT Token             â”‚
â”‚     (Signature + Expiration)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Extract User & Role           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Check Role Permissions           â”‚
â”‚  (require_role decorator)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Allow/Deny Access                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Frontend Architecture

### Component Structure
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ head-teacher/
â”‚   â”‚   â”‚   â””â”€â”€ +page.svelte (Dashboard)
â”‚   â”‚   â”œâ”€â”€ accountant/
â”‚   â”‚   â”‚   â””â”€â”€ +page.svelte (Dashboard)
â”‚   â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ students/
â”‚   â”‚   â”‚   â””â”€â”€ teachers/
â”‚   â”‚   â”œâ”€â”€ attendance/
â”‚   â”‚   â”œâ”€â”€ fees/
â”‚   â”‚   â”œâ”€â”€ parent/
â”‚   â”‚   â””â”€â”€ login/
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚
â”‚   â””â”€â”€ app.css
```

### State Management
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Svelte Stores               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - authStore (user, token, role)    â”‚
â”‚  - studentStore (students list)     â”‚
â”‚  - classStore (classes list)        â”‚
â”‚  - notificationStore (alerts)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Deployment Architecture

### Development
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend   â”‚     â”‚   Backend    â”‚
â”‚ localhost:   â”‚â”€â”€â”€â”€â–¶â”‚ localhost:   â”‚
â”‚    5174      â”‚     â”‚    8001      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚   SQLite     â”‚
                     â”‚   Database   â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production (Recommended)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Load Balancer / CDN          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         â”‚
    â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend â”‚           â”‚ Backend  â”‚
â”‚  Server  â”‚           â”‚  Server  â”‚
â”‚ (Nginx)  â”‚           â”‚ (Uvicorn)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚PostgreSQLâ”‚
                       â”‚ Database â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Optimizations

### Database
- Indexed columns (email, admission_number, invoice_number)
- Foreign key constraints
- Query optimization
- Connection pooling

### API
- Pagination for large datasets
- Lazy loading
- Response caching
- Batch operations

### Frontend
- Component lazy loading
- Code splitting
- Asset optimization
- Service worker (PWA ready)

---

## ğŸ”„ Integration Points

### External Services (Ready for Integration)
- SMS Gateway (Twilio / Africa's Talking)
- Email Service (SendGrid / AWS SES)
- Mobile Money APIs (MTN MoMo, Airtel Money)
- Payment Gateways
- Cloud Storage (AWS S3 / Azure Blob)

---

*Last Updated: 2024*
*Version: 2.0.0*
